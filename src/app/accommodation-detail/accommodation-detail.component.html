<nav class="navbar navbar-expand-lg navbar-light bg-transparent">
  <a class="navbar-brand" href="/dashboard">
      <img src="../../assets/images/rute-logo-temp.png" alt="Logo" class="logo">
  </a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
      <ul class="navbar-nav">
          <li class="nav-item">
              <a class="nav-link" href="#">Accomodation</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Tour & Guide</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Restaurant</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Transportation</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="">Itinerary Planning</a>
          </li>
          <li class="nav-item dropdown" id="navProfile">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                  <img src="../../assets/images/sample photo/1.jpeg" alt="Profile" class="rounded-circle"
                    style="width: 30px; height: 30px;">
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                  <li *ngIf="currentUser"><span class="dropdown-item">{{ currentUser.name }}</span></li>
                  <li><a class="dropdown-item" href="#"><i class="fas fa-user"></i> Customize User Profile</a></li>
                  <li><a class="dropdown-item" href="#"><i class="fas fa-paint-brush"></i> Change Theme</a></li>
                  <li><a class="dropdown-item" href="#"><i class="fas fa-key"></i> Reset Password</a></li>
                  <li *ngIf="currentUser.userType === 'user'"><a class="dropdown-item" href="/provider-registration"><i class="fas fa-user-plus"></i> Register as Provider</a></li>
                  <li *ngIf="currentUser.userType !== 'user'"><a class="dropdown-item" href="/manage-services"><i class="fas fa-exchange-alt"></i> Switch to Provider Mode</a></li>
                  <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt"></i> Log Out</a></li>
              </ul>
          </li>
      </ul>
  </div>
  <div class="form-inline">
      <select class="custom-select">
          <option selected>EN</option>
          <option>IND</option>
      </select>
  </div>
</nav>

<div *ngIf="accommodationDetail" class="container my-5">
  <!-- Accommodation Title and Description -->
  <div class="row">
    <div class="col-12 text-center">
      <h1 class="display-4 fw-bold">{{ accommodationDetail.productName }}</h1>
      <p class="lead text-muted">{{ accommodationDetail.productDescription }}</p>
    </div>
  </div>

  <!-- Carousel for Accommodation Images -->
  <div *ngIf="accommodationDetail.productImages?.length" class="row my-5">
    <div id="accommodationCarousel" class="carousel slide col-12 col-md-8 offset-md-2 shadow-lg rounded overflow-hidden" data-bs-ride="carousel">
      <div class="carousel-inner">
        <div
          *ngFor="let image of accommodationDetail.productImages; let isFirst = first"
          [class.active]="isFirst"
          class="carousel-item"
        >
          <img
            [src]="'http://localhost:3000/' + image"
            class="d-block w-100"
            alt="{{ accommodationDetail.productName }}"
            style="height: 400px; object-fit: cover;"
          />
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#accommodationCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#accommodationCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>

  <!-- Price and Location -->
  <div class="row text-center mb-4">
    <div class="col-12">
      <p class="h5"><strong>Price:</strong> {{ accommodationDetail.productPrice | currency }}</p>
      <p class="h5"><strong>Location:</strong> {{ accommodationDetail.location }}</p>
    </div>
  </div>

  <!-- Booking Button -->
  <div class="row mt-5">
    <div class="col-12 text-center">
      <button class="btn btn-primary btn-lg" (click)="openModal()">
        Book Now
      </button>
    </div>
  </div>

  <!-- Booking Modal -->
  <div *ngIf="isModalOpen">
    <div class="modal-backdrop fade show" style="background-color: rgba(0, 0, 0, 0.7);"></div>
    <div class="modal show d-block" tabindex="-1" role="dialog" style="z-index: 1055;">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg rounded-3 overflow-hidden">
          <!-- Modal Header -->
          <div class="modal-header bg-primary text-white rounded-top">
            <!-- <h3 class="modal-title text-center mx-auto display-6">Book Accommodation</h3> -->
            <h3 class="modal-title text-center mx-auto display-6">{{ accommodationDetail.productName }}</h3>
            


            <button type="button" class="btn-close btn-close-white" (click)="closeModal()" aria-label="Close"></button>
          </div>

          <!-- Modal Body -->
          <div class="modal-body p-4">
            <form (submit)="submitBooking()">
              <!-- Guest Name -->
              <div class="mb-3">
                <label for="guestName" class="form-label">Guest Name</label>
                <input
                  id="guestName"
                  type="text"
                  [(ngModel)]="bookingDetails.guestName"
                  name="guestName"
                  class="form-control"
                  placeholder="Enter your name"
                  required
                />
              </div>

              <!-- Accommodation Type -->
              <div class="mb-3">
                <label for="accommodationType" class="form-label">Accommodation Type</label>
                <select
                  id="accommodationType"
                  [(ngModel)]="bookingDetails.accommodationType"
                  name="accommodationType"
                  class="form-select"
                  required
                >
                  <option [value]="accommodationDetail.productSubcategory">
                    {{ accommodationDetail.productSubcategory }}
                  </option>
                </select>
              </div>

              <!-- Number of Guests -->
              <div class="mb-3">
                <label for="numberOfGuests" class="form-label">Number of Guests</label>
                <input
                  id="numberOfGuests"
                  type="number"
                  [(ngModel)]="bookingDetails.numberOfGuests"
                  name="numberOfGuests"
                  min="1"
                  class="form-control"
                  placeholder="Enter number of guests"
                  required
                />
              </div>

              <!-- Check-in Date -->
              <div class="mb-3">
                <label for="checkInDate" class="form-label">Check-in Date</label>
                <input
                  id="checkInDate"
                  type="date"
                  [(ngModel)]="bookingDetails.checkInDate"
                  name="checkInDate"
                  class="form-control"
                  required
                />
              </div>

              <!-- Check-out Date -->
              <div class="mb-3">
                <label for="checkOutDate" class="form-label">Check-out Date</label>
                <input
                  id="checkOutDate"
                  type="date"
                  [(ngModel)]="bookingDetails.checkOutDate"
                  name="checkOutDate"
                  class="form-control"
                  required
                />
              </div>

              <!-- Room Number -->
              <div class="mb-3">
                <label for="roomNumber" class="form-label">Room Number</label>
                <input
                  id="roomNumber"
                  type="number"
                  [(ngModel)]="bookingDetails.roomNumber"
                  name="roomNumber"
                  class="form-control"
                  placeholder="Enter room number"
                  required
                />
              </div>

              <!-- Special Request -->
              <div class="mb-3">
                <label for="specialRequest" class="form-label">Special Request</label>
                <textarea
                  id="specialRequest"
                  [(ngModel)]="bookingDetails.specialRequest"
                  name="specialRequest"
                  class="form-control"
                  rows="3"
                  placeholder="Enter any special requests"
                ></textarea>
              </div>

              <!-- Modal Actions -->
              <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-primary me-2">
                  Book Now
                </button>
                <button type="button" class="btn btn-secondary" (click)="closeModal()">
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


    <!-- Map Section -->
    <div class="row mt-4">
      <div class="col-12">
        <div #mapContainer id="map" style="height: 400px;"></div>
      </div>
    </div>
