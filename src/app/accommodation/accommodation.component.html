<app-user-navbar></app-user-navbar>
<app-search></app-search>
<!-- <app-weather-widget></app-weather-widget> -->

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

<!-- <div id="chatbot-container"></div>
<div class="frame" 
*ngIf="isWidgetVisible"
@fadeAnimation
     [ngStyle]="frameStyle" 
     (mousedown)="onDragStart($event)" 
     (mousemove)="onDragMove($event)" 
     (mouseup)="onDragEnd()">

       <!-- Close Button 
  <button class="close-btn" (click)="closeWidget()">&times;</button>

  <div class="top-right" [ngClass]="{'day-time': isDayTime, 'night-time': !isDayTime}">
    <div class="location" [ngClass]="{'day-time': isDayTime, 'night-time': !isDayTime}">{{ location }}</div>
    <div class="clock" [ngClass]="{'day-time': isDayTime, 'night-time': !isDayTime}">{{ currentTime }}</div>
  </div>
  <div *ngIf="isDayTime" class="sun">
    <div class="sun-rays"></div>
  </div>
  
  <div *ngIf="!isDayTime" class="moon">
    <div class="moon-crater1"></div>
    <div class="moon-crater2"></div>
  </div>
  

  <!-- <div class="sun"></div>

  
<div [ngClass]="{'clear-weather': weatherCondition === 'clear'}">
  <div class="hill-bg-1"></div>
  <div class="hill-bg-2"></div>
  <div class="hill-fg-1"></div>
  <div class="hill-fg-2"></div>
  <div class="hill-fg-3"></div>
</div>

	
  <div class="front">
		<div>
      <div class="temperature">
        {{ weather?.current?.temp }}°
      </div>
      
			<div class="icons">
				<i class="fas fa-wind"></i><br/><i class="fas fa-tint"></i>
			</div>
			<div>
        <div class="info">
          {{ getWindDirection(weather?.current?.windDir) }} {{ weather?.current?.windSpeed }} km/h <br>
          {{ weather?.current?.humidity }}%
        </div>
        
				<table class="preview">
					<tbody>
            <tr *ngFor="let day of weather?.forecast.slice(0, 2)">
              <td>{{ day.dayShort }}</td>
              <td>{{ day.maxTemp }}° | {{ day.minTemp }}°</td>
            </tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="proverb">{{ getWeatherProverb() }}</div>

	</div>

  <div *ngIf="weatherCondition === 'rainy'">
    <div class="drop-big-1"></div>
    <div class="drop-big-2"></div>
    <div class="drop-big-3"></div>
    <div class="drop-big-4"></div>
    <div class="drop-big-5"></div>
    <div class="drop-big-6"></div>
    <div class="drop-big-7"></div>
    <div class="drop-big-8"></div>
    <div class="drop-big-9"></div>
    <div class="drop-big-10"></div>
    <div class="drop-medium-1"></div>
    <div class="drop-medium-2"></div>
    <div class="drop-medium-3"></div>
    <div class="drop-medium-4"></div>
    <div class="drop-medium-5"></div>
    <div class="drop-medium-6"></div>
    <div class="drop-medium-7"></div>
    <div class="drop-medium-8"></div>
    <div class="drop-medium-9"></div>
    <div class="drop-medium-10"></div>
    <div class="drop-small-1"></div>
    <div class="drop-small-2"></div>
    <div class="drop-small-3"></div>
    <div class="drop-small-4"></div>
    <div class="drop-small-5"></div>
    <div class="drop-small-6"></div>
    <div class="drop-small-7"></div>
    <div class="drop-small-8"></div>
    <div class="drop-small-9"></div>
    <div class="drop-small-10"></div>
  </div>

</div> -->




<div class="container my-5">
  <h2 class="text-center mb-4 text-secondary" style="font-weight: 700; font-size: 2rem;">Accommodation Services</h2>

  <div *ngIf="accommodationServices.length === 0" class="text-center text-muted">
    <p><i class="fas fa-info-circle"></i> No accommodation services found.</p>
  </div>

  <div *ngIf="accommodationServices.length > 0" class="row">
    <div
      *ngFor="let service of accommodationServices"
      class="col-md-6 col-lg-4 mb-4"
      (click)="goToDetail(service._id)"
      style="cursor: pointer; text-decoration: none; color: inherit;"
    >
      <div class="card h-100 border-0 shadow-sm" style="border-radius: 10px; overflow: hidden; transition: transform 0.2s, box-shadow 0.2s;">
        <!-- Card Image Section -->
        <div *ngIf="service.productImages?.length" class="position-relative">
          <div id="carousel-{{ service._id }}" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
              <div
                *ngFor="let image of service.productImages.slice(0, 3); let i = index"
                class="carousel-item"
                [class.active]="i === 0"
              >
                <img
                  [src]="'http://localhost:3000/' + image"
                  alt="{{ service.productName }}"
                  class="card-img-top"
                  style="height: 250px; object-fit: cover;"
                />
              </div>
            </div>
            <button
              class="carousel-control-prev"
              type="button"
              [attr.data-bs-target]="'#carousel-' + service._id"
              data-bs-slide="prev"
              (click)="$event.stopPropagation()"
            >
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              [attr.data-bs-target]="'#carousel-' + service._id"
              data-bs-slide="next"
              (click)="$event.stopPropagation()"
            >
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
          
          <div class="position-absolute top-0 end-0 p-2">
            <span class="badge bg-primary"><i class="fas fa-map-marker-alt"></i> {{ service.location }}</span>
          </div>
        </div>

        <!-- Card Body Section -->
        <div class="card-body" style="padding: 1.25rem;">
          <h5 class="card-title text-dark mb-2" style="font-weight: 600; font-size: 1.15rem;">
            <i class="fas fa-hotel me-2 text-secondary"></i>{{ service.productName }}
          </h5>
          <p class="card-text text-muted" style="font-size: 0.95rem; line-height: 1.4;">{{ service.productDescription | truncate: 150 }}</p>

          <!-- Rating Section -->
          <div class="d-flex align-items-center mt-3">
            <ng-container *ngIf="service.averageRating > 0; else noRating">
              <div class="d-flex align-items-center">
                <!-- Full Stars -->
                <i *ngFor="let _ of [].constructor(Math.floor(service.averageRating))" class="fas fa-star text-warning"></i>
                <!-- Half Star -->
                <i *ngIf="service.averageRating % 1 >= 0.5" class="fas fa-star-half-alt text-warning"></i>
                <!-- Empty Stars -->
                <i *ngFor="let _ of [].constructor(5 - Math.floor(service.averageRating) - (service.averageRating % 1 >= 0.5 ? 1 : 0))" class="far fa-star text-warning"></i>
              </div>
              <span class="text-muted ms-2">{{ service.averageRating | number: '1.1-1' }} ({{ service.reviewCount }})</span>
            </ng-container>
            <ng-template #noRating>
              <span class="text-muted"><i class="far fa-star text-warning"></i> No ratings yet</span>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="google_translate_element"></div>
