<div *ngIf="accommodationDetail" class="container my-5">
  <!-- Accommodation Title and Description -->
  <div class="row">
    <div class="col-12 text-center">
      <h1 class="display-4">{{ accommodationDetail.productName }}</h1>
      <p class="lead text-muted">{{ accommodationDetail.productDescription }}</p>
    </div>
  </div>

  <!-- Carousel for Accommodation Images -->
  <div *ngIf="accommodationDetail.productImages?.length" class="row my-5">
    <div id="accommodationCarousel" class="carousel slide col-12 col-md-8 offset-md-2" data-bs-ride="carousel">
      <div class="carousel-inner">
        <div
          *ngFor="let image of accommodationDetail.productImages; let isFirst = first"
          [class.active]="isFirst"
          class="carousel-item"
        >
          <img
            [src]="'http://localhost:3000/' + image"
            class="d-block w-100"
            alt="{{ accommodationDetail.productName }}"
            style="height: 400px; object-fit: cover;"
          />
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#accommodationCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#accommodationCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>

  <!-- Price and Location -->
  <div class="row text-center">
    <div class="col-12">
      <p><strong>Price:</strong> {{ accommodationDetail.productPrice | currency }}</p>
      <p><strong>Location:</strong> {{ accommodationDetail.location }}</p>
    </div>
  </div>

  <!-- Booking Section -->
  <div class="row mt-5">
    <div class="col-12 text-center">
      <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" (click)="openModal()">
        Book Now
      </button>
    </div>
  </div>

<!-- Booking Modal -->
<div class="fixed z-10 inset-0 overflow-y-auto" *ngIf="isModalOpen">
  <div class="flex items-center justify-center min-h-screen px-4">
    <!-- Background Overlay -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

    <!-- Modal Container -->
    <div class="relative bg-white rounded-lg shadow-lg overflow-hidden transform transition-all sm:max-w-lg w-full">
      <!-- Modal Header -->
      <div class="bg-blue-500 p-5">
        <h3 class="text-lg leading-6 font-semibold text-white text-center">
          Book Accommodation
        </h3>
      </div>

      <!-- Modal Content -->
      <div class="px-6 py-5">
        <form (submit)="submitBooking()">
          <!-- Guest Name -->
          <div class="mb-4">
            <label for="guestName" class="block text-sm font-medium text-gray-700">Guest Name</label>
            <input
              id="guestName"
              type="text"
              [(ngModel)]="bookingDetails.guestName"
              name="guestName"
              placeholder="Enter your name"
              class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"
              required
            />
          </div>

          <!-- Accommodation Type -->
          <div class="mb-4">
            <label for="accommodationType" class="block text-sm font-medium text-gray-700">Accommodation Type</label>
            <select
              id="accommodationType"
              [(ngModel)]="bookingDetails.accommodationType"
              name="accommodationType"
              class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"
              required
            >
              <option [value]="accommodationDetail.productSubcategory">
                {{ accommodationDetail.productSubcategory }}
              </option>
            </select>
          </div>

          <!-- Number of Guests -->
          <div class="mb-4">
            <label for="numberOfGuests" class="block text-sm font-medium text-gray-700">Number of Guests</label>
            <input
              id="numberOfGuests"
              type="number"
              [(ngModel)]="bookingDetails.numberOfGuests"
              name="numberOfGuests"
              min="1"
              placeholder="Enter number of guests"
              class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"
              required
            />
          </div>

          <!-- Check-in Date -->
          <div class="mb-4">
            <label for="checkInDate" class="block text-sm font-medium text-gray-700">Check-in Date</label>
            <input
              id="checkInDate"
              type="date"
              [(ngModel)]="bookingDetails.checkInDate"
              name="checkInDate"
              class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"
              required
            />
          </div>

          <!-- Check-out Date -->
          <div class="mb-4">
            <label for="checkOutDate" class="block text-sm font-medium text-gray-700">Check-out Date</label>
            <input
              id="checkOutDate"
              type="date"
              [(ngModel)]="bookingDetails.checkOutDate"
              name="checkOutDate"
              class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"
              required
            />
          </div>

          <!-- Room Number -->
          <div class="mb-4">
            <label for="roomNumber" class="block text-sm font-medium text-gray-700">Room Number</label>
            <input
              id="roomNumber"
              type="number"
              [(ngModel)]="bookingDetails.roomNumber"
              name="roomNumber"
              placeholder="Enter room number"
              class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"
              required
            />
          </div>

          <!-- Special Request -->
          <div class="mb-4">
            <label for="specialRequest" class="block text-sm font-medium text-gray-700">Special Request</label>
            <textarea
              id="specialRequest"
              [(ngModel)]="bookingDetails.specialRequest"
              name="specialRequest"
              placeholder="Enter any special requests"
              class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200"
              rows="3"
            ></textarea>
          </div>

          <!-- Modal Actions -->
          <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
            <button type="submit" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-500 text-base font-medium text-white hover:bg-blue-700 sm:ml-3 sm:w-auto sm:text-sm">
              Book Now
            </button>
            <button type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm" (click)="closeModal()">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

</div>
